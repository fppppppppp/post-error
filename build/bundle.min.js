!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).postError={})}(this,(function(n){const t="http://127.0.0.1:7002/";let e={clientType:"1"};function r(){const n=function(){for(var n=[],t="0123456789abcdef",e=0;e<36;e++)n[e]=t.substr(Math.floor(16*Math.random()),1);return n[14]="4",n[19]=t.substr(3&n[19]|8,1),n[8]=n[13]=n[18]=n[23]="-",n.join("")+"-"+ +new Date}();e.uid=n}function o(){return e.uid||r(),e}function i(n){e.userid=n}const s=()=>{const{agent:n,version:t,name:e,isIE:r,isGecko:o,isWebkit:i,isStrict:s}=(()=>{var n=window.document,t=window.navigator.userAgent.toLowerCase(),e=n.documentMode,r=window.chrome||!1,o={agent:t,isIE:/msie/.test(t),isGecko:t.indexOf("gecko")>0&&t.indexOf("like gecko")<0,isWebkit:t.indexOf("webkit")>0,isStrict:"CSS1Compat"===n.compatMode,supportSubTitle:function(){return"track"in n.createElement("track")},supportScope:function(){return"scoped"in n.createElement("style")},ieVersion:function(){try{return t.match(/msie ([\d.]+)/)[1]||0}catch(n){return console.log("error"),e}},operaVersion:function(){try{if(window.opera)return t.match(/opera.([\d.]+)/)[1];if(t.indexOf("opr")>0)return t.match(/opr\/([\d.]+)/)[1]}catch(n){return console.log("error"),0}},versionFilter:function(...n){if(1===n.length&&"string"==typeof n[0]){var t=n[0],e=t.indexOf(".");if(e>0){var r=t.indexOf(".",e+1);if(-1!==r)return t.substr(0,r)}return t}return 1===n.length?n[0]:0}};try{o.type=o.isIE?"IE":window.opera||t.indexOf("opr")>0?"Opera":t.indexOf("chrome")>0?"Chrome":window.openDatabase?"Safari":t.indexOf("firefox")>0?"Firefox":"unknow",o.version="IE"===o.type?o.ieVersion():"Firefox"===o.type?t.match(/firefox\/([\d.]+)/)[1]:"Chrome"===o.type?t.match(/chrome\/([\d.]+)/)[1]:"Opera"===o.type?o.operaVersion():"Safari"===o.type?t.match(/version\/([\d.]+)/)[1]:"0",o.shell=function(){if(t.indexOf("maxthon")>0)return o.version=t.match(/maxthon\/([\d.]+)/)[1]||o.version,"傲游浏览器";if(t.indexOf("qqbrowser")>0)return o.version=t.match(/qqbrowser\/([\d.]+)/)[1]||o.version,"QQ浏览器";if(t.indexOf("se 2.x")>0)return"搜狗浏览器";if(r&&"Opera"!==o.type){var n=window.external,e=window.clientInformation.languages;if(n&&"LiebaoGetVersion"in n)return"猎豹浏览器";if(t.indexOf("bidubrowser")>0)return o.version=t.match(/bidubrowser\/([\d.]+)/)[1]||t.match(/chrome\/([\d.]+)/)[1],"百度浏览器";if(o.supportSubTitle()&&void 0===e){var i=Object.keys(r.webstore).length;return window,i>1?"360极速浏览器":"360安全浏览器"}return"Chrome"}return o.type},o.name=o.shell(),o.version=o.versionFilter(o.version)}catch(n){console.log(n)}return{client:o}})().client;return{agent:n,version:t,name:e,isIE:r,isGecko:o,isWebkit:i,isStrict:s}};function c(){let n=navigator.userAgent,t="Win32"==navigator.platform||"Windows"==navigator.platform,e="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;if(e)return"Mac";if("X11"==navigator.platform&&!t&&!e)return"Unix";if(String(navigator.platform).indexOf("Linux")>-1)return"Linux";if(t){if(n.indexOf("Windows NT 5.0")>-1||n.indexOf("Windows 2000")>-1)return"Win2000";if(n.indexOf("Windows NT 5.1")>-1||n.indexOf("Windows XP")>-1)return"WinXP";if(n.indexOf("Windows NT 5.2")>-1||n.indexOf("Windows 2003")>-1)return"Win2003";if(n.indexOf("Windows NT 6.0")>-1||n.indexOf("Windows Vista")>-1)return"WinVista";if(n.indexOf("Windows NT 6.1")>-1||n.indexOf("Windows 7")>-1)return"Win7";if(n.indexOf("Windows NT 10")>-1||n.indexOf("Windows 10")>-1)return"Win10"}return"other"}const u=()=>{const n=window.performance.timing||{},t=window.screen.colorDepth,e=window.document.referrer,r=navigator.language;return{performance:n,timsDns:n.domainLookupEnd-n.domainLookupStart,timsTcp:n.connectEnd-n.connectStart,timsWhiteScreen:n.responseStart-n.navigationStart,timsDomLoad:n.domContentLoadedEventEnd-n.navigationStart,timsLoad:n.loadEventEnd-n.navigationStart,lang:r,referrer:e,cd:t}},a=()=>{const n={height:window.screen.height,width:window.screen.width},t={innerWidth:window.innerWidth||window.document.body&&window.document.body.clientWidth||"UNKONW",innerHeight:window.innerHeight||window.document.body&&window.document.body.clientHeight||"UNKONW"};return{zoom:(e=0,r=window.screen,o=navigator.userAgent.toLowerCase(),~o.indexOf("firefox")?void 0!==window.devicePixelRatio&&(e=window.devicePixelRatio):~o.indexOf("msie")?r.deviceXDPI&&r.logicalXDPI&&(e=r.deviceXDPI/r.logicalXDPI):void 0!==window.outerWidth&&void 0!==window.innerWidth&&(e=window.outerWidth/window.innerWidth),e&&(e=Math.round(100*e)),99!==e&&101!==e||(e=100),e),os:c(),browserinfo:s(),windowScreen:n,windowWidthHeights:t};var e,r,o};const f={};function d(n,t){f[n]||(f[n]=[]),f[n].push(t)}function l(n,...t){let e=f[n];if(!e||0===e.length)return!1;e.forEach(n=>{n.apply(this,t)})}var w="0.4.5";let h=t;d("changeUrl",n=>{h=n});const p=function(n,t="er"){const e=document.createElement("img"),r=function(n){let t=[];const e=function(){let n=o();const{userid:t,uid:e,projectInfo:r,clientType:i}=n,{href:s}=window.location;let c={t:e,o:i,i:r,u:s,l:w};t&&(c.h=t);return c}(),r=Object.assign(Object.assign({},n),e);for(let n in r){let e=r[n];"object"==typeof e&&(e=encodeURIComponent(JSON.stringify(e))),t.push(`${n}=${encodeURIComponent(e)}`)}return t.push("_t="+ +new Date),"?"+t.join("&")}(Object.assign(Object.assign({},n),{p:t})),i=h+"pr/e.gif"+r;e.src=i};const m=p,g={url:t,delay:1e3,mergeReport:!0,random:1,repeat:20};function b(n){Object.assign(g,n);const{projectId:t,userId:r,clientType:o,url:i}=g;var s;t&&(s=t,e.projectInfo=s),r&&function(n){e.userid=n}(r),o&&function(n){e.clientType=n}(o),i&&l("changeUrl",i),o&&(g.clientType=o),m(v(),"lo")}function v(){return{inf:{os:{...a(),...u()}}}}function x(){return g}let W=!1;function y(){if(!W){!function(n){let t=h+"cl";navigator.sendBeacon(t,n)}(function(){const n=o(),{uid:t}=n;return new Blob([`_uu=${t}&_t=${+new Date}`],{type:"application/x-www-form-urlencoded"})}()),W=!0}}const O={};function E(n,t,e=-1){return!(e>0&&O[n]&&O[n].length>e)&&(function(n,t){O[n]||(O[n]={data:"",length:0,times:[]}),t&&(O[n].data=t),O[n].length++,O[n].times.push(+new Date)}(n,t),Object.assign(Object.assign({},O[n]),{length:O[n].length}))}let S=null;const _=[];function j(n,t="",e={}){const r=n+t,{name:o,message:i,stack:s}=n,c=n.m||n.name||"unkonw";let{line:u,col:a,other:f}=e;if(!u||!a){const n=function(n){if(!n||"string"!=typeof n)return null;try{const t=(n=n.replace(/\(|\)/g,"")).split("\n")[1];if(!t)return null;const e=t.split(":");if(e.length<2)return null;return{line:e[e.length-2],col:e[e.length-1]}}catch(n){throw n}}(s);n&&(u=1*n.line,a=1*n.col)}let d={name:o,message:i,stack:s,errStr:r,errorType:c,time:+new Date,line:u,col:a,other:f};const w=E(r,d,function(){const n=x(),{repeat:t}=n;return"number"==typeof t&&t>0?t:-1}());if(w){if(w.length>1){let n=_.findIndex(n=>n.data.errStr===r);n>-1?_[n]=w:w&&_.push(w)}else w&&_.push(w);l("onErrorPush")}}function k(){if(!_.length)return;const n=_.slice(0);_.length=0,p({list:n},"er")}function N(){!function(){const n=x(),{delay:t,mergeReport:e}=n;d("onErrorPush",()=>{e&&t&&t>0?S||(S=setInterval(()=>{k()},t)):(S&&(clearInterval(S),S=null),k())})}()}class M extends Error{constructor(n,t){super(),this.message=n,this.name=t,this.stack=(new Error).stack}}class L extends M{constructor(n,t="NetworkRequestError"){super(n,t),this.m="NetworkRequestError"}}class H extends M{constructor(n,t="UnhandledrejectionNotObjectError"){super(n,t),this.m="UnhandledrejectionNotObjectError"}}class T extends M{constructor(n,t="XHMHttpResponseError"){super(n,t),this.m="XHMHttpResponseError"}}class I extends M{constructor(n,t="XHMHttpError"){super(n,t),this.m="XHMHttpError"}}function q(){window.onerror=function(n,t,e,r,o){"Script error."!==n&&t&&j(o,"",{line:e,col:r})},window.addEventListener("unhandledrejection",n=>{if("object"==typeof n.reason)j(n.reason,"未处理的 unhandledrejection 事件 --- ");else{let t="string"==typeof n.reason?n.reason:JSON.stringify(n.reason);j(new H(t))}}),window.addEventListener("error",n=>{let t=null;n.target instanceof HTMLScriptElement&&(t=new L(n.target.src,"LoadScriptError")),n.target instanceof HTMLLinkElement&&(t=new L(n.target.href,"LoadLinkError")),n.target instanceof HTMLImageElement&&(t=new L(n.target.src,"LoadLinktError")),t&&j(t)},!0),function(){if(!window.Vue||!window.Vue.config)return;let n=window.Vue.config.errorHandler;window.Vue.config.errorHandler=function(t,e,r){j(t),"function"==typeof n&&n.call(this,t,e,r)}}()}function R(){window.addEventListener("beforeunload",n=>{y()}),window.addEventListener("unload",n=>{y()}),q(),function(){if(!window.XMLHttpRequest)return;const n=x().onXMLResponsePostError,t=XMLHttpRequest.prototype.send,e=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(n,t,...r){return this.g=t,this.v=n,e.apply(this,[n,t].concat(r))},XMLHttpRequest.prototype.send=function(...e){const r=this.onreadystatechange,o=(this.onerror,this);return o.W=e[0],o.addEventListener("error",(function(n){const t={error_status:{status:n.target.status},xml_mothod:o.v,xml_url:o.g,xml_query:o.W};o.O||(o.O=!0,j(new I(JSON.stringify(t)),"",{line:0,col:0,other:n.target.responseText.slice(0,200)}))})),o.addEventListener("abort",(function(n){"abort"===n.type&&(o.S=!0)})),this.onreadystatechange=function(...t){if(4===o.readyState)if(o.S||200===o.status){if(200===o.status&&n&&n(o.responseText)){const n={error_msg:JSON.stringify({code:o.status}),xml_mothod:o.v,xml_url:o.g,xml_query:o.W};o.O||(o.O=!0,j(new T(JSON.stringify(n)),"",{line:0,col:0,other:JSON.stringify({responseData:o.responseText.slice(0,2e3)})}))}}else{const n={error_msg:JSON.stringify({status:o.status}),xml_url:o.g,xml_mothod:o.v,xml_query:o.W};o.O||(o.O=!0,j(new T(JSON.stringify(n)),"",{line:0,col:0,other:o.responseText.slice(0,200)}))}r&&r.apply(this,t)},t.apply(this,e)}}()}const X={};n.bindPlugin=function(n,t){const e=n(t),{name:r,plugin:o}=e;return r&&o&&(o[r]=o),o},n.config=function(n){b(n),R(),N()},n.getPlugin=function(n){return X[n]||null},n.pluginReact=function(n){class t extends n.Component{constructor(n){super(n),this.state={hasError:!1}}componentDidCatch(n,t){this.setState({hasError:!0})}render(){if(this.state.hasError){const{FallbackComponent:t}=this.props;return t?n.createElement(t,this.state):null}return this.props.children}}return{name:"react",plugin:t}},n.setUserId=function(n){let t=v();const e=o();if(e.userid){const n=e.uid;r(),t=Object.assign(Object.assign({},t),{_:n})}else i(n);m(t,"ch")},Object.defineProperty(n,"__esModule",{value:!0})}));
//# sourceMappingURL=bundle.min.js.map
